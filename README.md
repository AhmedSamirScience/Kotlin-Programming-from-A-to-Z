<body>

<h1>Kotlin Companion Objects Demonstration</h1>

<p>This repository contains a Kotlin application that demonstrates the concept of companion objects in Kotlin. Companion objects are singleton objects associated with a class. They can be used to provide utility functions, such as factory methods, that support the class's behavior. They are similar to static content in Java or C# classes.</p>

<h2>Code Overview</h2>

<pre>
<code>
/**
 * This file demonstrates the concept of companion objects in Kotlin.
 *
 * Companion objects are singleton objects for a class. They can be used to provide utility functions,
 * such as factory methods, that support the concept modeled by the class. They are similar to static
 * content in Java or C# classes.
 *
 * A companion object:
 * - Is defined within the body of the class.
 * - Is marked as a companion object.
 * - Does not have a name.
 *
 * Companion objects are useful for housekeeping behavior, factory operations, shared data across all
 * instances of a class, etc. From the user's perspective, the companion object and the class appear
 * as a single concept.
 */

class UserSession private constructor(val id: Int) {

    // Companion (singleton) object
    companion object {
        private val MAX = 100
        private var count = 0

        // Increment count
        private fun next() = count++

        // Factory method to create a new UserSession
        fun create(): UserSession {
            return UserSession(count).also { next() }
        }
    }

    // Member function to print session data
    fun printData() {
        println("Id is $id and MAX is $MAX")
    }

    // Override toString method
    override fun toString(): String {
        return "UserSession($id)"
    }
}

/**
 * The main function demonstrates the creation and use of UserSession instances
 * using the companion object's factory method.
 */
fun main() {
    // Create UserSession instances using the companion object's factory method
    val session1 = UserSession.create()
    println(session1)

    val session2 = UserSession.create()
    println(session2)

    // Print data of the first session
    session1.printData()
}

/*
 * Output:
 * UserSession(0)
 * UserSession(1)
 * Id is 0 and MAX is 100
 */

/**
 * Explanation:
 *
 * - The `UserSession` class has a private constructor, so it cannot be instantiated directly from outside the class.
 * - The companion object within `UserSession` provides a `create()` factory method to create new instances.
 * - The `next()` function increments the `count` variable, ensuring each session has a unique ID.
 * - The `printData()` method displays the session ID and the `MAX` value.
 * - The companion object acts as a singleton, controlling the creation of `UserSession` instances.
 */


/**
 * Summary:
 * Companion Object: The companion object is a singleton object tied to the UserSession class. It provides utility functions like the create() factory method that controls how instances of UserSession are created.
 *
 * Private Constructor: The constructor of UserSession is private, so instances cannot be created directly from outside the class. Instead, they must be created using the create() method provided by the companion object.
 *
 * Output: The main function demonstrates how to create and use UserSession instances. The unique session IDs are generated by the companion object's create() method, and session data is printed using the printData() method.
 *
 * This class.kt file gives a complete and structured example of how to use companion objects in Kotlin, along with detailed comments and explanations.
 */
</code>
</pre>

<h3>Companion Objects in Kotlin</h3>

<p>In Kotlin, a companion object is a singleton object associated with a class. It provides a way to define utility functions, factory methods, or shared data that can be accessed without creating an instance of the class. Companion objects are similar to static members in Java or C#.</p>

<h3>Example: UserSession Class with Companion Object</h3>

<p>The following example demonstrates how to use a companion object within a class:</p>

<pre><code>
class UserSession private constructor(val id: Int) {

    // Companion (singleton) object
    companion object {
        private val MAX = 100
        private var count = 0

        // Increment count
        private fun next() = count++

        // Factory method to create a new UserSession
        fun create(): UserSession {
            return UserSession(count).also { next() }
        }
    }

    // Member function to print session data
    fun printData() {
        println("Id is $id and MAX is $MAX")
    }

    // Override toString method
    override fun toString(): String {
        return "UserSession($id)"
    }
}
</code></pre>

<p>The <code>UserSession</code> class uses a companion object to manage the creation of its instances. The companion object contains a private variable <code>count</code> to track the number of sessions created and provides a factory method <code>create()</code> to instantiate new sessions.</p>

<h3>Using the Companion Object</h3>

<p>The <code>main</code> function demonstrates how to use the companion object's factory method to create and manage <code>UserSession</code> instances:</p>

<pre><code>
fun main() {
    // Create UserSession instances using the companion object's factory method
    val session1 = UserSession.create()
    println(session1)

    val session2 = UserSession.create()
    println(session2)

    // Print data of the first session
    session1.printData()
}
</code></pre>

<h3>Output</h3>

<pre>
<code>
UserSession(0)
UserSession(1)
Id is 0 and MAX is 100
</code>
</pre>

<h3>Explanation</h3>

<ul>
    <li><strong>Companion Object:</strong> The companion object is a singleton associated with the <code>UserSession</code> class. It provides utility functions like the <code>create()</code> factory method to manage the creation of <code>UserSession</code> instances.</li>
    <li><strong>Private Constructor:</strong> The constructor of <code>UserSession</code> is private, so instances cannot be created directly from outside the class. Instead, they must be created using the <code>create()</code> method provided by the companion object.</li>
    <li><strong>Output:</strong> The main function demonstrates how to create and use <code>UserSession</code> instances. The unique session IDs are generated by the companion object's <code>create()</code> method, and session data is printed using the <code>printData()</code> method.</li>
</ul>

<h3>Summary</h3>

<p>Companion objects in Kotlin are a powerful tool for creating utility functions, managing shared data, and providing factory methods. By using a companion object, you can control how instances of a class are created and provide additional functionality that is associated with the class as a whole.</p>

<h2>How to Run</h2>

<ol>
    <li>Clone the repository:
        <pre><code>git clone &lt;repository-url&gt;</code></pre>
    </li>
    <li>Open the project in your preferred IDE (e.g., IntelliJ IDEA, Android Studio).</li>
    <li>Navigate to the <code>main</code> function.</li>
    <li>Run the <code>main</code> function to see the output.</li>
</ol>

<h2>License</h2>

<p>This project is licensed under the MIT License.</p>

<h2>Author</h2>

<p><strong>Ahmed Samir</strong> - Software Engineer</p>

</body>
</html>
